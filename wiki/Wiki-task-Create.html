<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>T&M System Assign Task: Persons, Bridging, Tracking</title>
  <style>
    body {
      font-family: sans-serif;
      max-width: 800px;
      margin: 2rem auto;
      padding: 0 1rem;
      line-height: 1.6;
      color: #222;
    }
    h1, h2 {
      color: #004080;
    }
    code {
      background: #f4f4f4;
      padding: 2px 6px;
      border-radius: 4px;
    }
    blockquote {
      border-left: 3px solid #ccc;
      padding-left: 1rem;
      color: #555;
      margin: 1rem 0;
    }
    .section {
      margin-bottom: 2rem;
    }

  .relationship-flow {
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 2rem auto;
    gap: 1rem;
  }

  .flow-box {
    padding: 0.75rem 1.25rem;
    background-color: #f0f8ff;
    border: 2px solid #004080;
    border-radius: 6px;
    font-weight: bold;
    text-align: center;
    min-width: 120px;
    color: #004080;
  }

  .arrow {
    font-size: 1.5rem;
    color: #666;
  }

  .task-container {
    max-width: 600px;
    margin: 2rem auto;
    padding: 1rem;
    border: 2px solid #004080;
    border-radius: 8px;
    background-color: #e6f0ff;
  }

  .task-header {
    font-weight: bold;
    color: #004080;
    font-size: 1.2rem;
    margin-bottom: 0.5rem;
  }

  .meta-label {
    font-size: 0.75rem;
    color: #666;
    margin-bottom: 0.25rem;
  }

  .step-group {
    display: flex;
    justify-content: space-between;
    gap: 0.5rem;
    margin-top: 1rem;
    flex-wrap: wrap;
  }

  .step-box {
    flex: 1;
    min-width: 100px;
    background-color: #f9fcff;
    border: 1.5px solid #004080;
    border-radius: 6px;
    padding: 0.5rem;
    text-align: center;
  }

  .step-title {
    font-weight: bold;
    color: #004080;
    margin-bottom: 0.25rem;
  }

  .meta-label-small {
    font-size: 0.65rem;
    color: #888;
  }

  .step-box.ghost {
    background-color: #f0f0f0;
    border-style: dashed;
    color: #999;
  }





</style>
    
</head>
<body>

<body>
  <p>This is a React component named <code>CreateTaskDialog</code> that presents a modal interface for creating new tasks and their associated steps.</p>

  <h2>Purpose of the Component</h2>
  <p>The primary function of this component is to give an authenticated user a guided workflow for defining a new task. The dialog is structured into two main sections: first, creating the task's main header information and, second, adding individual steps to that newly created task. The component uses a Supabase database for all data storage and retrieval, and it provides real-time feedback to the user via toast notifications.</p>

  <h2>Key Functionality</h2>
  <p><strong>State Management:</strong> The component employs several <code>useState</code> hooks to manage the form. It keeps track of the task's name, description, and URL, as well as the details for each step. It also handles the loading state for both saving the task and saving a step, and it stores the unique ID of the saved task to enable step creation. An array of step objects is maintained to display the steps that have been added so far.</p>

  <p><strong>Data Persistence:</strong> All data is handled through the Supabase client. When the user submits the task form, the <code>handleSaveTask</code> function is called. It performs a database insert into the <code>task_headers</code> table, storing the task's name, description, URL, and the author's ID. After a successful insert, it updates the component's state with the new task's ID. When a user adds a new step, the <code>handleSaveStep</code> function inserts a new record into the <code>task_steps</code> table, linking the step to the previously created task ID. The logic also includes a special case to update an existing step with an order of 3 rather than inserting a new one.</p>

  <p><strong>User Interface (UI):</strong> The UI is a responsive dialog that appears as an overlay. The content is divided into two sections using <code>Card</code> components. The "Task Details" card is where the user enters the main task information. The "Task Steps" card is initially disabled and becomes active only after the main task has been successfully saved. This enforces the correct workflow. The forms within the cards include inputs for text and URLs, and a textarea for descriptions. Buttons are dynamically labeled ("Saving Task..." or "Saving Step...") and disabled during a save operation. A <code>resetForm</code> function and a toast notification system are used to provide a clean state and clear user feedback on success or failure.</p>

  <p>In short, this component provides a comprehensive and user-friendly solution for an administrative task: defining a new task and its step-by-step instructions in a database-backed system.</p>
</body>


<div class="task-container">
  <div class="task-header">Task</div>
  <div class="meta-label">name</div>
  <div class="meta-label">description</div>

  <div class="step-group">
    <div class="step-box">
      <div class="step-title">Abandoned</div>
      <div class="meta-label-small">name</div>
      <div class="meta-label-small">description</div>
    </div>
    <div class="step-box">
      <div class="step-title">Completed</div>
      <div class="meta-label-small">name</div>
      <div class="meta-label-small">description</div>
    </div>
    <div class="step-box">
      <div class="step-title">Step 3</div>
      <div class="meta-label-small">name</div>
      <div class="meta-label-small">description</div>
    </div>
    <div class="step-box ghost">
      <div class="step-title">More Steps</div>
      <div class="meta-label-small">name</div>
      <div class="meta-label-small">description</div>
    </div>
  </div>
</div>


    
        


<div class="task-container">
  <div class="task-header">Profile</div>
  <div class="meta-label">name</div>
  <div class="meta-label">email</div>

  <div class="step-group">
    <div class="step-box">
      <div class="step-title">Author</div>
      <div class="meta-label-small">Created a task</div>
      <div class="meta-label-small">date done</div>
    </div>
    <div class="step-box ghost">
      <div class="step-title">Student</div>
      <div class="meta-label-small">name</div>
      <div class="meta-label-small">Task Name</div>
<div class="meta-label-small">Step Number</div>        
    </div>
          <div class="step-box ghost">
      <div class="step-title">Manager</div>
      <div class="meta-label-small">name</div>
      <div class="meta-label-small"></div>
              <div class="meta-label-small">Task name</div>
    </div>

  </div>
</div>

    
      


  <div class="relationship-flow">
    <div class="flow-box">Task tracking within T&M</div>
    <div> not directly connected to </div>
    <div class="flow-box">The real task</div>
  </div>
<p>      <h2>Recap</h2></p>

    
          

  <div class="section">
    <h2>Roles and Context</h2>
    <ul>
      <li><strong>Author</strong>: Emerges when a profile creates a task.</li>
      <li><strong>Student</strong>: Defined by a task assignment.</li>
      <li><strong>Manager</strong>: Assigned during task creation or via assignment metadata.</li>
    </ul>
    <p>Roles are ephemeral and contextual â€” not inherent to the profile itself.</p>
  </div>


  </body>

  <footer>
    <p><em>4 August 2025.</em></p>
  </footer>
</body>
</html>
